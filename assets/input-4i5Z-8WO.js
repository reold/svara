import{ar as h,as as u,at as m,u as i,a2 as k,au as y,av as S,aw as E,ax as b}from"./index-DKE6VTDk.js";function q(e,l,a=l){var f=new WeakSet;h(e,"input",async r=>{var s=r?e.defaultValue:e.value;if(s=n(e)?t(s):s,a(s),u!==null&&f.add(u),await m(),s!==(s=l())){var v=e.selectionStart,o=e.selectionEnd,c=e.value.length;if(e.value=s??"",o!==null){var d=e.value.length;v===o&&o===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=v,e.selectionEnd=Math.min(o,d))}}}),i(l)==null&&e.value&&(a(n(e)?t(e.value):e.value),u!==null&&f.add(u)),k(()=>{var r=l();if(e===document.activeElement){var s=y??u;if(f.has(s))return}n(e)&&r===t(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const _=new Set;function x(e,l,a,f,r=f){var s=a.getAttribute("type")==="checkbox",v=e;if(l!==null)for(var o of l)v=v[o]??(v[o]=[]);v.push(a),h(a,"change",()=>{var c=a.__value;s&&(c=w(v,c,a.checked)),r(c)},()=>r(s?[]:null)),k(()=>{var c=f();s?(c=c||[],a.checked=c.includes(a.__value)):a.checked=S(a.__value,c)}),E(()=>{var c=v.indexOf(a);c!==-1&&v.splice(c,1)}),_.has(v)||(_.add(v),b(()=>{v.sort((c,d)=>c.compareDocumentPosition(d)===4?-1:1),_.delete(v)})),b(()=>{})}function B(e,l,a=l){h(e,"change",f=>{var r=f?e.defaultChecked:e.checked;a(r)}),i(l)==null&&a(e.checked),k(()=>{var f=l();e.checked=!!f})}function w(e,l,a){for(var f=new Set,r=0;r<e.length;r+=1)e[r].checked&&f.add(e[r].__value);return a||f.delete(l),Array.from(f)}function n(e){var l=e.type;return l==="number"||l==="range"}function t(e){return e===""?null:+e}export{x as a,q as b,B as c};
