import{b as P,p as B,w as I,f as R,g as p,y as T,s as m,T as k,A as b,D as g,l as y,j as z,aR as Q,K as Y,a0 as N,e as x,a as X,h as v,C as J,d as M}from"./index-vMURVn30.js";import{S as O}from"./ShapesSolid-dru5X_nM.js";import{c as u,l as F}from"./Dash-8diNvjoU.js";import{P as G,d as _}from"./services.svelte-Ce5PAndT.js";var Z=R('<img alt="cover art" class="h-full" loading="lazy"/>'),A=R('<div role="button"><button><!></button> <button class="flex flex-col overflow-x-hidden -space-y-0 justify-center text-left w-full"><h2><!></h2> <span class="font-light text-[0.7em] text-black/80 dark:text-white/80 pl-2 truncate max-w-full"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-[0.7em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="m16.49 12 3.75 3.75m0 0-3.75 3.75m3.75-3.75H3.74V4.499"></path></svg> <!></span></button> <button class="p-0 text-black dark:text-white w-16 flex flex-col items-center justify-center" aria-label="visit source link"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="size-[1.3em] dark:stroke-white/50 stroke-black/50"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"></path></svg></button></div>');function ee(e,t){P(t,!0);const a=B(t,"playing",3,!1);let o=I({held:!1,originX:0,originY:0,completed:!1});const i={start:({clientX:r,clientY:n})=>{o.held=!0,o.originX=r,o.originY=n,v(l,!0),window.addEventListener("pointerup",i.end),window.addEventListener("pointermove",i.move)},move:({clientX:r,clientY:n})=>{if(!o.held)return;r-o.originX;const D=n-o.originY;Math.abs(D)>50&&(o.held=!1,v(l,!1))},end:()=>{o.held=!1,o.completed=!0,v(l,!1),window.removeEventListener("pointermove",i.move),window.removeEventListener("pointerup",i.end)}};let l=z(!1);var c=A();c.__pointerdown=function(...r){var n;(n=i.start)==null||n.apply(this,r)},c.__pointerup=function(...r){var n;(n=i.end)==null||n.apply(this,r)};var h=p(c);h.__click=r=>{!a()&&t.onPlay&&t.onPlay()};var L=p(h);{var q=r=>{var n=Z();b(()=>J(n,"src",t.track.image)),x(r,n)},U=r=>{O(r,{class:"size-10"})};T(L,r=>{t.track.image?r(q):r(U,!1)})}var f=m(h,2);f.__click=r=>{!a()&&t.onPlay&&t.onPlay()};var w=p(f),E=p(w);k(E,()=>t.track.title);var S=m(w,2),C=m(p(S),2);k(C,()=>t.track.subtitle);var j=m(f,2);j.__click=function(...r){var n;(n=t.onMoreActions)==null||n.apply(this,r)},b(()=>{g(c,1,`w-full h-[calc(var(--spacing)*18)] pl-1.5 ring-zinc-500 text-black dark:text-white overflow-hidden flex flex-row border-b-0 border-black/5 dark:border-white/5 select-none transition-colors duration-100 ${y(l)?"bg-black/5 dark:bg-white/5":"bg-transparent"}`),g(h,1,`p-0 m-0 h-12 min-w-12 my-auto transition-transform duration-200 rounded-lg overflow-hidden ${y(l)?"scale-105":""}`),g(w,1,`font-medium text-md max-w-full truncate ${a()?"text-violet-600 dark:text-violet-500":""}`)}),Q("pointercancel",c,function(...r){var n;(n=i.end)==null||n.apply(this,r)}),Y(3,c,()=>N,()=>({duration:200})),x(e,c),X()}M(["pointerdown","pointerup","click"]);var d=(e=>(e.Q12="12kbps",e.Q48="48kbps",e.Q96="96kbps",e.Q160="160kbps",e.Q320="320kbps",e))(d||{});const H={host:"",headers:{},query:async(e,t)=>{},getDownloadableURL:async e=>{},getStreamURL:async e=>{},helpers:{}},s=Object.create(H);s.host=`${G}${encodeURIComponent("https://www.jiosaavn.com/api.php")}`;s.headers={Host:"www.saavn.com",Accept:"*/*","User-Agent":"Saavn (iPhone)","Accept-Language":"en-IN;q=1.0, ml-IN;q=0.9, hi-IN;q=0.8","Accept-Encoding":"br;q=1.0, gzip;q=0.9, deflate;q=0.8",Connection:"keep-alive",Cookie:{ssid:"did_v1_79D9162F-4F77-4B42-8D86-5EC214467860.1741341828.67317",_pl:"iphoneapp-"}};s.helpers.decryptURL=e=>{if(!e)return[];const t="38346591",a="00000000",o=u.util.decode64(e),i=u.cipher.createDecipher("DES-ECB",u.util.createBuffer(t));i.start({iv:u.util.createBuffer(a)}),i.update(u.util.createBuffer(o)),i.finish();const l=i.output.getBytes();return[{quality:d.Q12,url:l.replace("_96","_12")},{quality:d.Q48,url:l.replace("_96","_48")},{quality:d.Q96,url:l},{quality:d.Q160,url:l.replace("_96","_160")},{quality:d.Q320,url:l.replace("_96","_320")}]};s.helpers.toTrackT=async e=>{var o;const t=await s.getDownloadableURLs(e);if(t.length==0){console.error("no media url found for track");return}const a=(o=t.at(-1))==null?void 0:o.url;return{meta:{id:e.id,title:e.title,img:e.image.replace("150x150","500x500"),artist:e.more_info.artistMap.primary_artists[0].name||"",album:e.more_info.album||"",color:"#7008e7"},url:a}};s.helpers.fetchPlaylist=async e=>await _(`${s.host}${encodeURIComponent(`?p=1&listid=${e}&_format=json&_marker=0&api_version=4&ctx=web6dot0&n=30&__call=playlist.getDetails`)}`,JSON.stringify({headers:s.headers,method:"GET"}));s.query=async(e,t={kind:"track"})=>{let a;switch(t.kind){case"track":a=await _(`${s.host}${encodeURIComponent(`?p=1&q=${e}&_format=json&_marker=0&api_version=4&ctx=web6dot0&n=30&__call=search.getResults`)}`,JSON.stringify({headers:s.headers,method:"GET"}));break;case"playlist":a=await _(`${s.host}${encodeURIComponent(`?p=1&q=${e}&_format=json&_marker=0&api_version=4&ctx=web6dot0&n=30&__call=search.getPlaylistResults`)}`,JSON.stringify({headers:s.headers,method:"GET"}));break;default:throw new Error("Invalid query kind")}return s.enhancements.responses.query(a,t.kind)};s.enhancements={responses:{query:(e,t="track")=>{switch(t){case"track":return e.results=e.results.map(a=>(a.image=a.image.replace("http://","https://"),F(a,"urls",async()=>{const o=await s.getDownloadableURLs(a);if(o.length==0){console.error("no media url found for track");return}return o}),a)),e;case"playlist":return e.results=e.results.map(a=>(a.image=a.image.replace("http://","https://"),a)),e}}}};s.getDownloadableURLs=async e=>s.helpers.decryptURL(e.more_info.encrypted_media_url);export{s as J,ee as T};
